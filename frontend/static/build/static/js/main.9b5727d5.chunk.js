(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(12),c=n.n(r),o=(n(17),n(18),n(11)),i=n(3),l=n.n(i),u=n(4),b=n(2),j=(n(20),n(6)),m=n(7),d=n(0);var p=function(e){var t=Object(a.useState)({username:"",email:"",password1:"",password2:""}),n=Object(b.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(null),o=Object(b.a)(c,2),i=o[0],l=o[1],u=function(e){var t=e.target,n=t.name,a=t.value;r((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},n,a))}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{className:"Registration-title",children:"Register"}),Object(d.jsxs)("form",{stytle:{margin:"0 20px"},className:"mt-3",onSubmit:function(t){t.preventDefault(),s.password1!==s.password2?l("Passwords do not match!"):e.handleRegistration(s)},children:[Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"enter username",required:!0,name:"username",onChange:u,value:s.username})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"enter email",required:!0,name:"email",onChange:u,value:s.email})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"password1",children:"Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password1",placeholder:"enter password",required:!0,name:"password1",onChange:u,value:s.password1})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"password2",children:"Confirm Password"}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password2",placeholder:"confirm password",required:!0,name:"password2",onChange:u,value:s.password2}),Object(d.jsx)("span",{className:"text-danger",children:i})]}),Object(d.jsx)("button",{type:"submit",className:"registration-btn mt-3",children:"Register"})]})]})},h=n(5),f=n.n(h);var O=function(e){var t=Object(a.useState)(""),n=Object(b.a)(t,2),s=n[0],r=n[1],c=Object(a.useState)(""),o=Object(b.a)(c,2),i=o[0],l=o[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{className:"form input-group mb-3",action:"",onSubmit:function(t){var n;t.preventDefault(),e.submitMessage(s,null===(n=e.rooms)||void 0===n?void 0:n.id,i),console.log(e),r(""),l("")},children:[Object(d.jsx)("input",{className:"form-control",name:"name",value:s,"aria-label":"Recipient's username","aria-describedby":"basic-addon2",type:"text",placeholder:"name",onChange:function(e){r(e.target.value)}}),Object(d.jsx)("input",{name:"text",value:i,type:"text",placeholder:"text",onChange:function(e){l(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"btn-submit",children:"Subtmit"})]})})};var g=function(e){var t,n,s;console.log("props",e.message);var r=Object(a.useState)(""),c=Object(b.a)(r,2),o=c[0],i=c[1];console.log(e.rooms);var l=null===(t=e.message)||void 0===t?void 0:t.map((function(t){return Object(d.jsx)("div",{className:"message-list",value:t.room,children:Object(d.jsxs)("div",{className:"message-list-content",children:[Object(d.jsx)("h4",{children:t.user}),Object(d.jsx)("p",{children:t.body}),Object(d.jsx)("button",{className:"btn delete-btn",value:t.id,onClick:function(){return e.deleteMessage(t)},children:"Delete"})]})},t.id)}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"messages",children:[Object(d.jsx)("h2",{children:null===(n=e.selectedRoom)||void 0===n?void 0:n.name}),Object(d.jsxs)("div",{className:"message-user",children:[l,Object(d.jsxs)("form",{className:"Message-form",onSubmit:function(t){t.preventDefault(),e.submitMessage(o,e.rooms),console.log(e),i("")},children:[Object(d.jsx)("input",{name:"text",value:o,type:"text",placeholder:"Message  #".concat(null===(s=e.selectedRoom)||void 0===s?void 0:s.name),onChange:function(e){i(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"submit_btn",children:"Subtmit"})]})]})]})})};var x=function(e){function t(){return(t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/rest-auth/logout/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify()});case 2:if((n=t.sent).ok){t.next=7;break}console.warn(n),t.next=12;break;case 7:return t.next=9,n.json();case 9:t.sent,f.a.remove("Authorization"),e.setSelection("Login");case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{className:"logout-btn",onClick:function(){return function(){return t.apply(this,arguments)}()},children:"Log Out"})})};var v=function(e){var t,n=Object(a.useState)({name:""}),s=Object(b.a)(n,2),r=s[0],c=s[1],o=e.rooms.map((function(t){return Object(d.jsx)("div",{children:Object(d.jsx)("button",{className:"side-dar-btn",onClick:e.getMessages,type:"button",value:t.id,children:t.name},t.name)})}));return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"side-bar-nav",children:[Object(d.jsx)("h3",{children:"Rooms"}),Object(d.jsx)("nav",{className:"nav-bar",children:o}),Object(d.jsxs)("form",(t={onSubmit:e.addRoom,className:"room-form"},Object(j.a)(t,"onSubmit",(function(t){t.preventDefault(),e.addRoom(r)})),Object(j.a)(t,"children",[Object(d.jsx)("input",{type:"text",placeholder:"Add Room",name:"new-room",onChange:function(e){c(e.target.value)},style:{width:"50%"}}),Object(d.jsx)("button",{type:"submit",className:"addRoom-btn",children:"Add Room"})]),t))]})})};var y=function(e){var t=Object(a.useState)({username:"",password:""}),n=Object(b.a)(t,2),s=n[0],r=n[1],c=function(e){var t=e.target,n=t.name,a=t.value;r((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},n,a))}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{className:"login-h2",children:"Log In"}),Object(d.jsxs)("form",{className:"form",action:"",onSubmit:function(t){t.preventDefault(),e.Login(s),e.setSelection("MessageList"),console.log(s)},children:[Object(d.jsx)("input",{type:"text",className:"",id:"username",placeholder:"enter username",required:!0,name:"username",onChange:c,value:s.username}),Object(d.jsx)("input",{name:"password",value:s.password,type:"password",placeholder:"password",onChange:c}),Object(d.jsx)("button",{type:"submit",className:"submit_btn",children:"Login"})]})]})};var S=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"loginPage",children:[Object(d.jsx)("h4",{children:"Are You New Here?"}),Object(d.jsx)("p",{children:"set up a free account here"}),Object(d.jsx)("button",{type:"submit",className:"registration-btn registration-btn-load",onClick:function(){return e.setSelection("RegistrationForm")},children:"Register"}),Object(d.jsx)("h4",{children:"Been Here?"}),Object(d.jsx)("button",{type:"submit",className:"login-btn-2 login_btn-load",onClick:function(){return e.setSelection("Login")},children:"Login"})]})})};var w=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)(!1),c=Object(b.a)(r,2),i=(c[0],c[1],Object(a.useState)([])),j=Object(b.a)(i,2),m=j[0],h=j[1],w=Object(a.useState)({id:0,name:""}),N=Object(b.a)(w,2),k=N[0],C=N[1],R=Object(a.useState)(!1),F=Object(b.a)(R,2),T=(F[0],F[1],Object(a.useState)(!0)),M=Object(b.a)(T,2),L=(M[0],M[1],Object(a.useState)("")),P=Object(b.a)(L,2),A=P[0],D=P[1];function _(e){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api_v1/chats/".concat(t.target.value,"/messages/"));case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,r=m.find((function(e){return e.id.toString()===t.target.value})),C(r),s(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t},console.log(t),e.next=4,fetch("/api_v1/chats/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(n)});case 4:if(!(a=e.sent).ok){e.next=10;break}return console.log(a),h([].concat(Object(o.a)(m),[n])),console.log({rooms:m}),e.abrupt("return",a.json());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((n=e.sent).ok){e.next=7;break}console.warn(n),e.next=14;break;case 7:return D(t.username),e.next=10,n.json();case 10:a=e.sent,console.log(a),f.a.set("Authorization","Token ".concat(a.key)),a.key||f.a.remove("Authorization");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user:A,room:k.id,body:t},console.log({newMessage:a}),e.next=4,fetch("/api_v1/chats/".concat(k.id,"/messages/"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(a)});case 4:if(r=e.sent,console.log(r),s([].concat(Object(o.a)(n),[a])),!r.ok){e.next=9;break}return e.abrupt("return",r.json());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api_v1/chats/");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,console.log(n),e.next=9,h(n);case 9:console.log("rooms",m);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var B=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(t)},e.next=3,fetch("/rest-auth/registration/",n);case 3:if(a=e.sent){e.next=8;break}console.warn(a),e.next=12;break;case 8:return e.next=10,a.json();case 10:s=e.sent,f.a.set("Authorization","Token ".concat(s.key));case 12:K("Sidebar");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function I(){return(I=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.room),console.log("delete function"),e.next=4,fetch("/api_v1/chats/".concat(t.room,"/messages/").concat(t.id,"/"),{method:"DELETE",headers:{"X-CSRFToken":f.a.get("csrftoken")}});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U,H=Object(a.useState)("Room"),G=Object(b.a)(H,2),Y=G[0],K=G[1];return"MessageForm"===Y?U=Object(d.jsx)(O,{}):"Room"===Y?U=Object(d.jsx)(S,{setSelection:K,selection:Y}):"MessageList"===Y?U=Object(d.jsxs)("div",{children:[Object(d.jsx)(x,{setSelection:K,setGlobalUser:D,selection:Y})," ",Object(d.jsx)(g,{message:n,submitMessage:function(e){return X.apply(this,arguments)},rooms:m,deleteMessage:function(e){return I.apply(this,arguments)},selectedRoom:k,globalUser:A}),Object(d.jsx)(v,{rooms:m,getMessages:_,addRoom:E})]}):"RegistrationForm"===Y?U=Object(d.jsx)(p,{handleRegistration:B}):"Login"===Y?U=Object(d.jsx)(y,{Login:function(e){return z.apply(this,arguments)},setSelection:K}):"Sidebar"===Y&&(U=Object(d.jsx)(v,{rooms:m,getMessages:_,addRoom:E})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("header",{className:"header",children:"Slack 2.0"}),U,console.log(n)]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root")),N()}},[[22,1,2]]]);
//# sourceMappingURL=main.9b5727d5.chunk.js.map